---
title: "스프링으로 쇼핑몰을 만들어보자20 - 작가목록 기능 구현 4"
tags: 스프링쇼핑몰
date: "2024.03.05"
categories: 
    - Spring
---

## 기능구현
- 회원가입(주소API연동, 이메일 인증, ajax를 사용하여 아이디 중복검사)
- 관리자 페이지(인터셉터 적용, 상품관리, 회원관리)
- 업로드(이미지 등록, 수정, 삭제)
- 검색
- 페이징
- 구매(장바구니, 포인트사용)
- 댓글(등록,수정,삭제)
- 중간에 막혔거나 에러 해결 못하겠으면 ybnr92@gmail.com 으로 문의

<br>

## 목표
- 검색 인터페이스 구현 & 검색 결과 없을 시 뷰 처리

<br>

## 순서
- 검색 인터페이스 추가(`authorManage.jsp`)
- 검색 결과 없을 경우 처리

<br>

## 검색 인터페이스 추가(authorManage.jsp)
- 기존 `<form>` 태그가 있지만 검색 기능에 사용 될 `<form>` 태그를 새로 추가하여 구현한다.
- 물론 js코드를 통해서 기존 `<form>` 태그를 활용하여 검색 기능을 구현해도 상관은 없다.
- 하지만 보통 사용자가 `<input>`태그에 검색어를 입력 후 enter를 누르면 검색이 되는데 javascript를 통해 기존 `<form>` 태그 활용하는 방식은 enter를 눌렀을 때 동작하지 않는 단점이 있다.
- 사용자가 입력할 `<input>`태그와 검색을 실행하는 `<button>`태그를 새로운 `<form>`태그 안에 작성하고자 한다.

<br>

![](/assets/images/20240305_1.png)

<br>

```jsp
<!-- 검색 영역 -->
                    <div class="search_wrap">
                    	<form id="searchForm" action="/admin/authorManage" method="get">
                    		<div class="search_input">
                    			<input type="text" name="keyword" value='<c:out value="${pageMaker.cri.keyword}"></c:out>'>
                    			<input type="hidden" name="pageNum" value='<c:out value="${pageMaker.cri.pageNum }"></c:out>'>
                    			<input type="hidden" name="amount" value='${pageMaker.cri.amount}'>
                    			<button class="btn search_btn">검색</button>
                    		</div>
                    	</form>
                    </div>
```

<br>

- 검색 키워드에 대한 정보뿐만 아니라 pageNum과 amount에 대한 데이터도 같이 넘겨야 하기 때문에 type속성 값이 hidden인 `<input>`태그를 추가해주었다.
- 해당 `<input>` 태그는 페이지가 로딩될 때 기본적으로 서버에서 전달받은 pageNum과 amount, keyword값이 저장되도록 설정하였다.
- 지금 작성된 상태만으로도 검색 기능 동작이 가능하다. 하지만 키워드 입력 없이 사용자가 검색 버튼을 누르지 못하도록 유효성 체크 기능과 pageNum의 값을 1로 대입해주는 처리를 하기 위해서 아래의 js코드를 작성한다.

<br>

```js
let searchForm = $('#searchForm');

/* 작가 검색 버튼 동작 */
$('#searchForm button').on("click", function(e){
	e.preventDefault();
	
	/* 검색 키워드 유효성 검사 */
	if (!searchForm.find("input[name='keyword']").val()) {
		alert("키워드를 입력하세요.");
		return false;
	}
	
	searchForm.find("input[name='pageNum']").val("1");
	
	searchForm.submit();
}
```

![](/assets/images/20240305_2.png)

<br>

- 검색 인터페이스를 꾸며준다.

<br>

```css
/* 검색 영역 */
.search_wrap{
	margin-top:15px;
}
.search_input{
    position: relative;
    text-align:center;	
}
.search_input input[name='keyword']{
	padding: 4px 10px;
    font-size: 15px;
    height: 20px;
    line-height: 20px;
}
.search_btn{
	height: 32px;
    width: 80px;
    font-weight: 600;
    font-size: 18px;
    line-height: 20px;
    position: absolute;
    margin-left: 15px;
    background-color: #c3daf7;
}
```

<br>

![](/assets/images/20240305_3.png)

<br>

![](/assets/images/20240305_4.png)

<br>

## 작성중
